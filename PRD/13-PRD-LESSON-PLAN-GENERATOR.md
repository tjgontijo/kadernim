# PRD 13: Gerador de Planos de Aula com BNCC

## 1. VisÃ£o Geral

### 1.1 O que Ã©?
Ferramenta guiada para criar planos de aula alinhados Ã  BNCC em poucos minutos. A professora responde perguntas simples, seleciona habilidades da BNCC, e o sistema gera um plano estruturado com exportaÃ§Ã£o para Word e PDF.

### 1.2 Por que fazer?
- **Dor real**: Criar plano de aula Ã© demorado e repetitivo
- **Diferencial**: Alinhamento auditÃ¡vel com BNCC (coordenador aprova)
- **RetenÃ§Ã£o**: Motivo para usar o app toda semana
- **Valor percebido**: Feature premium que justifica assinatura

### 1.3 PÃºblico-alvo
- Professoras da EducaÃ§Ã£o BÃ¡sica
- **Perfil**: Baixa familiaridade com tecnologia, preferem interfaces simples
- **Contexto**: Precisam entregar planos para coordenaÃ§Ã£o, tÃªm pouco tempo

---

## 2. Regras de NegÃ³cio

### 2.1 Acesso
- **Apenas assinantes** podem usar
- UsuÃ¡rios free veem a feature bloqueada (upsell)

### 2.2 Limites

| Recurso | Limite |
|---------|--------|
| Planos por mÃªs | 15 |
| Habilidades BNCC por plano | 1-3 |
| HistÃ³rico salvo | Ãšltimos 20 planos |

### 2.3 Custo de IA estimado

**Modelo:** `gpt-4o-mini` (melhor custo-benefÃ­cio)

**PreÃ§os (OpenAI, janeiro 2026):**
- Input: $0.150 / 1M tokens
- Output: $0.600 / 1M tokens

**Estimativa por plano:**

| Componente | Tokens | CÃ¡lculo | Custo |
|------------|--------|---------|-------|
| **Input** (system + user prompt) | ~1.000 | 1.000 Ã— $0.150/1M | $0.00015 |
| **Output** (plano completo JSON) | ~2.000 | 2.000 Ã— $0.600/1M | $0.00120 |
| **Total por plano** | ~3.000 | | **$0.00135** |

**ProjeÃ§Ãµes mensais:**

| CenÃ¡rio | Assinantes | Planos/usuÃ¡rio | Total planos | Custo total |
|---------|------------|----------------|--------------|-------------|
| **Conservador** | 500 | 8 | 4.000 | **~$5.40** |
| **Moderado** | 1.000 | 10 | 10.000 | **~$13.50** |
| **Otimista** | 2.000 | 12 | 24.000 | **~$32.40** |

**ObservaÃ§Ãµes:**
- Custo marginal **desprezÃ­vel** (~$0.0014/plano)
- Limite de 15/mÃªs previne abuso
- NÃ£o inclui custos de infraestrutura (Vercel/banco)

---

## 3. Estrutura do Plano de Aula

Baseado no padrÃ£o BNCC nacional:

| SeÃ§Ã£o | DescriÃ§Ã£o | Origem |
|-------|-----------|--------|
| **IdentificaÃ§Ã£o** | TÃ­tulo, ano, disciplina, duraÃ§Ã£o | Wizard |
| **Habilidades BNCC** | CÃ³digos e descriÃ§Ãµes | Professora seleciona |
| **Objetivos** | O que alunos devem aprender | IA gera |
| **ConteÃºdo** | Tema central da aula | Professora informa |
| **Metodologia** | Etapas da aula com tempo | IA gera |
| **Recursos** | Materiais necessÃ¡rios | IA gera |
| **AvaliaÃ§Ã£o** | Como verificar aprendizagem | IA gera |

---

## 4. UI/UX Design

### 4.1 PrincÃ­pios (dado perfil do usuÃ¡rio)

```
âœ… FAZER                           âŒ EVITAR
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Uma pergunta por tela              FormulÃ¡rios longos
BotÃµes grandes e claros            Muitas opÃ§Ãµes juntas
SeleÃ§Ã£o visual (cards/chips)       Campos de texto livre
Linguagem simples                  Termos tÃ©cnicos
Progresso visÃ­vel                  Passos indefinidos
Feedback imediato                  AÃ§Ãµes sem confirmaÃ§Ã£o
```

### 4.2 Tela Principal - Com Planos

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â†  Planos de Aula                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  VocÃª criou 3 de 15 planos este mÃªs     â”‚
â”‚  â”â”â”â”â”â”â”â”â”â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  + Criar Novo Plano             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“š SEUS PLANOS                         â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸ“ FraÃ§Ãµes                     â”‚    â”‚
â”‚  â”‚  3Âº Ano Â· MatemÃ¡tica            â”‚    â”‚
â”‚  â”‚  15 de janeiro                  â”‚    â”‚
â”‚  â”‚                                 â”‚    â”‚
â”‚  â”‚  [ğŸ“„ Word]  [ğŸ“‘ PDF]            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸ“ Sistema Solar               â”‚    â”‚
â”‚  â”‚  4Âº Ano Â· CiÃªncias              â”‚    â”‚
â”‚  â”‚  12 de janeiro                  â”‚    â”‚
â”‚  â”‚                                 â”‚    â”‚
â”‚  â”‚  [ğŸ“„ Word]  [ğŸ“‘ PDF]            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸ“ Leitura e InterpretaÃ§Ã£o     â”‚    â”‚
â”‚  â”‚  2Âº Ano Â· PortuguÃªs             â”‚    â”‚
â”‚  â”‚  8 de janeiro                   â”‚    â”‚
â”‚  â”‚                                 â”‚    â”‚
â”‚  â”‚  [ğŸ“„ Word]  [ğŸ“‘ PDF]            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3 Tela Principal - Empty State

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â†  Planos de Aula                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚                                         â”‚
â”‚                                         â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚              â”‚   ğŸ“    â”‚                â”‚
â”‚              â”‚   âœ¨    â”‚                â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                         â”‚
â”‚      Crie seu primeiro plano de aula    â”‚
â”‚                                         â”‚
â”‚      Responda algumas perguntas e       â”‚
â”‚      tenha um plano completo em         â”‚
â”‚      minutos, alinhado Ã  BNCC!          â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                                 â”‚    â”‚
â”‚  â”‚     Criar Meu Primeiro Plano    â”‚    â”‚
â”‚  â”‚                                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                         â”‚
â”‚      15 planos disponÃ­veis este mÃªs     â”‚
â”‚                                         â”‚
â”‚                                         â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.4 Wizard de CriaÃ§Ã£o (4 Etapas)

**âš ï¸ IMPORTANTE: BIFURCAÃ‡ÃƒO EI vs EF**

O wizard tem **dois fluxos diferentes** apÃ³s a seleÃ§Ã£o da etapa:

| Etapa de Ensino | Etapa 1 | Campos |
|-----------------|---------|--------|
| **EducaÃ§Ã£o Infantil (EI)** | Faixa EtÃ¡ria + Campo de ExperiÃªncia | âŒ NÃ£o usa "ano"<br>âŒ NÃ£o usa "disciplina" |
| **Ensino Fundamental (EF)** | Ano + Disciplina | âœ… Usa ano (1Âº ao 9Âº)<br>âœ… Usa disciplina (MatemÃ¡tica, etc) |

---

**ETAPA 1: SELEÃ‡ÃƒO DE ETAPA DE ENSINO**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ•  Novo Plano                   1 de 4 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  â— â”â”â”â”â”â”â”â” â—‹ â”€â”€â”€â”€â”€â”€â”€â”€â”€ â—‹ â”€â”€â”€â”€â”€â”€â”€â”€â”€ â—‹   â”‚
â”‚  Turma      Tema       BNCC      Gerar  â”‚
â”‚                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                         â”‚
â”‚  Para qual etapa de ensino?             â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸ‘¶                              â”‚    â”‚
â”‚  â”‚  EducaÃ§Ã£o Infantil              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸ“š                     âœ“       â”‚    â”‚
â”‚  â”‚  Fundamental - Anos Iniciais    â”‚    â”‚
â”‚  â”‚  (1Âº ao 5Âº ano)                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸ“–                              â”‚    â”‚
â”‚  â”‚  Fundamental - Anos Finais      â”‚    â”‚
â”‚  â”‚  (6Âº ao 9Âº ano)                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚          Continuar â†’            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ETAPA 1A (se selecionou EI): FAIXA ETÃRIA + CAMPO DE EXPERIÃŠNCIA**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ•  Novo Plano                   1 de 4 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  â— â”â”â”â”â”â”â”â” â—‹ â”€â”€â”€â”€â”€â”€â”€â”€â”€ â—‹ â”€â”€â”€â”€â”€â”€â”€â”€â”€ â—‹   â”‚
â”‚  Turma      Tema       BNCC      Gerar  â”‚
â”‚                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                         â”‚
â”‚  âœ“ EducaÃ§Ã£o Infantil                    â”‚
â”‚                                         â”‚
â”‚  Qual faixa etÃ¡ria?                     â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸ‘¶                              â”‚    â”‚
â”‚  â”‚  BebÃªs                           â”‚    â”‚
â”‚  â”‚  (zero a 1 ano e 6 meses)        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸ§’                              â”‚    â”‚
â”‚  â”‚  CrianÃ§as bem pequenas           â”‚    â”‚
â”‚  â”‚  (1 ano e 7 meses a 3 anos       â”‚    â”‚
â”‚  â”‚   e 11 meses)                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸ‘¦                     âœ“        â”‚    â”‚
â”‚  â”‚  CrianÃ§as pequenas               â”‚    â”‚
â”‚  â”‚  (4 anos a 5 anos e 11 meses)    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                         â”‚
â”‚  Qual campo de experiÃªncia?             â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸ‘¥                               â”‚    â”‚
â”‚  â”‚ O eu, o outro e o nÃ³s            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸ¤¸                               â”‚    â”‚
â”‚  â”‚ Corpo, gestos e movimentos       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸ¨                      âœ“        â”‚    â”‚
â”‚  â”‚ TraÃ§os, sons, cores e formas     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸ’­                               â”‚    â”‚
â”‚  â”‚ Escuta, fala, pensamento e       â”‚    â”‚
â”‚  â”‚ imaginaÃ§Ã£o                       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸ”¢                               â”‚    â”‚
â”‚  â”‚ EspaÃ§os, tempos, quantidades,    â”‚    â”‚
â”‚  â”‚ relaÃ§Ãµes e transformaÃ§Ãµes        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â† Voltar â”‚ â”‚    Continuar â†’      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ETAPA 1B (se selecionou EF): ANO + DISCIPLINA**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ•  Novo Plano                   1 de 4 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  â— â”â”â”â”â”â”â”â” â—‹ â”€â”€â”€â”€â”€â”€â”€â”€â”€ â—‹ â”€â”€â”€â”€â”€â”€â”€â”€â”€ â—‹   â”‚
â”‚  Turma      Tema       BNCC      Gerar  â”‚
â”‚                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                         â”‚
â”‚  âœ“ Fundamental - Anos Iniciais          â”‚
â”‚                                         â”‚
â”‚  Qual ano?                              â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ 1Âº  â”‚ â”‚ 2Âº  â”‚ â”‚ 3Âº  â”‚ â”‚ 4Âº  â”‚ â”‚ 5Âº  â”‚â”‚
â”‚  â”‚     â”‚ â”‚     â”‚ â”‚  âœ“  â”‚ â”‚     â”‚ â”‚     â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                         â”‚
â”‚  Qual disciplina?                       â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ ğŸ”¤        â”‚ â”‚ ğŸ”¢        â”‚            â”‚
â”‚  â”‚ PortuguÃªs â”‚ â”‚ MatemÃ¡ticaâ”‚            â”‚
â”‚  â”‚           â”‚ â”‚     âœ“     â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ ğŸ”¬        â”‚ â”‚ ğŸŒ        â”‚            â”‚
â”‚  â”‚ CiÃªncias  â”‚ â”‚ Geografia â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ ğŸ“œ        â”‚ â”‚ ğŸ¨        â”‚            â”‚
â”‚  â”‚ HistÃ³ria  â”‚ â”‚ Artes     â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â† Voltar â”‚ â”‚    Continuar â†’      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ETAPA 2: TEMA**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ•  Novo Plano                   2 de 4 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  â—‹ â”â”â”â”â”â”â”â” â— â”â”â”â”â”â”â”â”â” â—‹ â”€â”€â”€â”€â”€â”€â”€â”€â”€ â—‹   â”‚
â”‚  Turma      Tema       BNCC      Gerar  â”‚
â”‚                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                         â”‚
â”‚  3Âº Ano Â· MatemÃ¡tica                    â”‚
â”‚                                         â”‚
â”‚  Qual o tema da aula?                   â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                                 â”‚    â”‚
â”‚  â”‚ IntroduÃ§Ã£o Ã s fraÃ§Ãµes           â”‚    â”‚
â”‚  â”‚                                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  Ex: "FraÃ§Ãµes", "Sistema Solar"         â”‚
â”‚                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                         â”‚
â”‚  Quantas aulas?                         â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚   1   â”‚ â”‚   2   â”‚ â”‚   3   â”‚          â”‚
â”‚  â”‚ aula  â”‚ â”‚ aulas â”‚ â”‚ aulas â”‚          â”‚
â”‚  â”‚       â”‚ â”‚   âœ“   â”‚ â”‚       â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                         â”‚
â”‚  DuraÃ§Ã£o de cada aula: 50 min           â”‚
â”‚                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â† Voltar â”‚ â”‚    Continuar â†’      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ETAPA 3A (EI): SELEÃ‡ÃƒO DE HABILIDADES BNCC**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ•  Novo Plano                   3 de 4 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  â—‹ â”â”â”â”â”â”â”â” â—‹ â”â”â”â”â”â”â”â”â” â— â”â”â”â”â”â”â”â”â” â—‹   â”‚
â”‚  Turma      Tema       BNCC      Gerar  â”‚
â”‚                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                         â”‚
â”‚  EI Â· CrianÃ§as pequenas                 â”‚
â”‚  TraÃ§os, sons, cores e formas           â”‚
â”‚                                         â”‚
â”‚  Selecione 1 a 3 habilidades BNCC       â”‚
â”‚                                         â”‚
â”‚  ğŸ” Buscar habilidade...                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ â˜‘ï¸ EI03TS01                     â”‚    â”‚
â”‚  â”‚                                 â”‚    â”‚
â”‚  â”‚ Utilizar sons produzidos por    â”‚    â”‚
â”‚  â”‚ materiais, objetos e            â”‚    â”‚
â”‚  â”‚ instrumentos musicais durante   â”‚    â”‚
â”‚  â”‚ brincadeiras...                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ â˜‘ï¸ EI03TS02                     â”‚    â”‚
â”‚  â”‚                                 â”‚    â”‚
â”‚  â”‚ Expressar-se livremente por     â”‚    â”‚
â”‚  â”‚ meio de desenho, pintura,       â”‚    â”‚
â”‚  â”‚ colagem, dobradura...           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ â˜ EI03TS03                      â”‚    â”‚
â”‚  â”‚                                 â”‚    â”‚
â”‚  â”‚ Reconhecer as qualidades do     â”‚    â”‚
â”‚  â”‚ som (intensidade, duraÃ§Ã£o,      â”‚    â”‚
â”‚  â”‚ altura e timbre)...             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                         â”‚
â”‚  2 de 3 selecionadas                    â”‚
â”‚                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â† Voltar â”‚ â”‚    Continuar â†’      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ETAPA 3B (EF): SELEÃ‡ÃƒO DE HABILIDADES BNCC**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ•  Novo Plano                   3 de 4 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  â—‹ â”â”â”â”â”â”â”â” â—‹ â”â”â”â”â”â”â”â”â” â— â”â”â”â”â”â”â”â”â” â—‹   â”‚
â”‚  Turma      Tema       BNCC      Gerar  â”‚
â”‚                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                         â”‚
â”‚  3Âº Ano Â· MatemÃ¡tica Â· FraÃ§Ãµes          â”‚
â”‚                                         â”‚
â”‚  Selecione 1 a 3 habilidades BNCC       â”‚
â”‚                                         â”‚
â”‚  ğŸ” Buscar habilidade...                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ â˜‘ï¸ EF03MA09                     â”‚    â”‚
â”‚  â”‚                                 â”‚    â”‚
â”‚  â”‚ Associar o quociente de uma     â”‚    â”‚
â”‚  â”‚ divisÃ£o com resto zero de um    â”‚    â”‚
â”‚  â”‚ nÃºmero natural por 2, 3, 4, 5   â”‚    â”‚
â”‚  â”‚ e 10 Ã s ideias de metade,       â”‚    â”‚
â”‚  â”‚ terÃ§a parte, quarta parte...    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ â˜‘ï¸ EF03MA10                     â”‚    â”‚
â”‚  â”‚                                 â”‚    â”‚
â”‚  â”‚ Identificar e representar       â”‚    â”‚
â”‚  â”‚ fraÃ§Ãµes (menores e maiores que  â”‚    â”‚
â”‚  â”‚ a unidade), associando-as ao    â”‚    â”‚
â”‚  â”‚ resultado de uma divisÃ£o...     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ â˜ EF03MA08                      â”‚    â”‚
â”‚  â”‚                                 â”‚    â”‚
â”‚  â”‚ Resolver e elaborar problemas   â”‚    â”‚
â”‚  â”‚ de divisÃ£o de um nÃºmero natural â”‚    â”‚
â”‚  â”‚ por outro...                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                         â”‚
â”‚  2 de 3 selecionadas                    â”‚
â”‚                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â† Voltar â”‚ â”‚    Continuar â†’      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ETAPA 4: RESUMO E GERAÃ‡ÃƒO**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ•  Novo Plano                   4 de 4 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  â—‹ â”â”â”â”â”â”â”â” â—‹ â”â”â”â”â”â”â”â”â” â—‹ â”â”â”â”â”â”â”â”â” â—   â”‚
â”‚  Turma      Tema       BNCC      Gerar  â”‚
â”‚                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                         â”‚
â”‚  ğŸ“‹ RESUMO DO SEU PLANO                 â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Ano:        3Âº Ano             â”‚    â”‚
â”‚  â”‚  Disciplina: MatemÃ¡tica         â”‚    â”‚
â”‚  â”‚  Tema:       IntroduÃ§Ã£o Ã s      â”‚    â”‚
â”‚  â”‚              fraÃ§Ãµes            â”‚    â”‚
â”‚  â”‚  DuraÃ§Ã£o:    2 aulas (100 min)  â”‚    â”‚
â”‚  â”‚                                 â”‚    â”‚
â”‚  â”‚  Habilidades BNCC:              â”‚    â”‚
â”‚  â”‚  â€¢ EF03MA09                     â”‚    â”‚
â”‚  â”‚  â€¢ EF03MA10                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                         â”‚
â”‚  EstÃ¡ tudo certo?                       â”‚
â”‚                                         â”‚
â”‚  [âœï¸ Editar informaÃ§Ãµes]                â”‚
â”‚                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                                 â”‚    â”‚
â”‚  â”‚      âœ¨ Gerar Meu Plano         â”‚    â”‚
â”‚  â”‚                                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                         â”‚
â”‚  â±ï¸ Isso leva cerca de 30 segundos      â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**TELA DE GERAÃ‡ÃƒO (Loading)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                         â”‚
â”‚                                         â”‚
â”‚                                         â”‚
â”‚                                         â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚              â”‚  âœ¨ğŸ“   â”‚                â”‚
â”‚              â”‚   âŸ³    â”‚                â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                         â”‚
â”‚        Criando seu plano de aula...     â”‚
â”‚                                         â”‚
â”‚        â”â”â”â”â”â”â”â”â”â”â”â”â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 65%      â”‚
â”‚                                         â”‚
â”‚        Buscando habilidades BNCC...     â”‚
â”‚                                         â”‚
â”‚                                         â”‚
â”‚                                         â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**TELA DE SUCESSO**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                         â”‚
â”‚                                         â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚              â”‚   ğŸ‰    â”‚                â”‚
â”‚              â”‚   ğŸ“    â”‚                â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                         â”‚
â”‚         Plano criado com sucesso!       â”‚
â”‚                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                         â”‚
â”‚  IntroduÃ§Ã£o Ã s FraÃ§Ãµes                  â”‚
â”‚  3Âº Ano Â· MatemÃ¡tica Â· 2 aulas          â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                                 â”‚    â”‚
â”‚  â”‚      ğŸ“„ Baixar Word (.docx)     â”‚    â”‚
â”‚  â”‚                                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                                 â”‚    â”‚
â”‚  â”‚      ğŸ“‘ Baixar PDF              â”‚    â”‚
â”‚  â”‚                                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                         â”‚
â”‚        [Criar outro plano]              â”‚
â”‚        [Ver meus planos]                â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. Modelo de Dados

### 5.1 BNCC (Base Nacional)

**IMPORTANTE:** A BNCC Ã© a **"fonte de verdade"** armazenada como um "tabelÃ£o" para consultas da IA. Usa slugs ao invÃ©s de FKs rÃ­gidas para flexibilidade estrutural.

```prisma
model BnccSkill {
  id String @id @default(cuid())

  // CÃ³digo oficial BNCC (fonte de verdade)
  // âš ï¸ NÃƒO Ã© unique sozinho! CÃ³digos como EF12LP01 cobrem mÃºltiplos anos
  code String // "EI03TS01", "EF05MA09", "EF12LP01", "EF15AR01"...

  // Etapa de ensino (slug do EducationLevel existente)
  educationLevelSlug String // "educacao-infantil" | "ensino-fundamental-1" | "ensino-fundamental-2"

  // ===== EDUCAÃ‡ÃƒO INFANTIL =====
  fieldOfExperience String? // "TraÃ§os, sons, cores e formas"
  ageRange String?          // "ei-criancas-pequenas" (slug do Grade)

  // ===== ENSINO FUNDAMENTAL =====
  gradeSlug String?         // "ef1-3-ano", "ef2-7-ano" (slug do Grade)
  subjectSlug String?       // "matematica", "historia" (slug do Subject)
  unitTheme String?         // "NÃºmeros", "Ãlgebra" (Unidade TemÃ¡tica)
  knowledgeObject String?   // "FraÃ§Ã£o", "Sistema de numeraÃ§Ã£o" (Objeto de Conhecimento)

  // Texto principal (obrigatÃ³rio)
  description String @db.Text // Texto completo da habilidade BNCC

  // ConteÃºdo auxiliar (se disponÃ­vel na planilha oficial)
  comments String? @db.Text
  curriculumSuggestions String? @db.Text

  // ===== BUSCA =====
  // Full-Text Search (PostgreSQL) com unaccent
  // Gerado automaticamente por trigger em reset-db.sh
  searchVector Unsupported("tsvector")?

  // Embeddings (OpenAI) - Opcional para busca semÃ¢ntica
  // Gerado via script: npx tsx scripts/embed.ts
  embedding Unsupported("vector(1536)")?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Ãndices para performance
  @@index([educationLevelSlug])
  @@index([gradeSlug])
  @@index([subjectSlug])
  @@index([code])
  @@index([searchVector], type: Gin)     // FTS com GIN index
  // @@index([embedding], type: IVFFlat) // NÃ£o suportado no schema - criar via SQL

  // âš ï¸ IMPORTANTE: Unique compostos separados para EI e EF
  @@unique([code, gradeSlug])   // EF: Permite duplicar EF12, EF15, etc por ano
  @@unique([code, ageRange])    // EI: Previne duplicaÃ§Ã£o por faixa etÃ¡ria

  @@map("bncc_skill")
}
```

**Por que usar slugs ao invÃ©s de FKs?**
1. **Flexibilidade**: EI tem estrutura diferente de EF (campos de experiÃªncia vs disciplinas)
2. **IA consulta texto**: A IA faz buscas textuais/semÃ¢nticas, nÃ£o precisa de JOINs
3. **ImportaÃ§Ã£o simples**: Mapeia direto da planilha BNCC sem lookups
4. **Denormalizado = rÃ¡pido**: Uma Ãºnica query traz tudo que a IA precisa

**Por que dois unique compostos?**
- **EF usa `gradeSlug`**: CÃ³digos como `EF12LP01` abrangem mÃºltiplos anos
  - `@@unique([code, gradeSlug])` permite `EF12LP01` + `ef1-1-ano` e `EF12LP01` + `ef1-2-ano`
- **EI usa `ageRange`**: Previne duplicaÃ§Ã£o por faixa etÃ¡ria
  - `@@unique([code, ageRange])` garante `EI03TS01` + `ei-criancas-pequenas` Ãºnico
- **Queries simples**:
  - EF: `WHERE code = 'EF12LP01' AND gradeSlug = 'ef1-1-ano'`
  - EI: `WHERE code = 'EI03TS01' AND ageRange = 'ei-criancas-pequenas'`

### 5.2 Planos de Aula

```prisma
model LessonPlan {
  id        String   @id @default(cuid())

  // Autor
  userId    String
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  // IdentificaÃ§Ã£o
  title              String   // "IntroduÃ§Ã£o Ã s FraÃ§Ãµes"
  educationLevelId   String   // FK para EducationLevel
  educationLevel     EducationLevel @relation(fields: [educationLevelId], references: [id])
  year               String   // "3" (3Âº ano) - extraÃ­do do cÃ³digo BNCC
  subjectId          String   // FK para Subject
  subject            Subject  @relation(fields: [subjectId], references: [id])
  duration           Int      // NÃºmero de aulas (1, 2, 3)

  // ConteÃºdo gerado pela IA (JSON estruturado - ver schema abaixo)
  content   Json     // LessonPlanContent (TypeScript interface abaixo)

  // Habilidades BNCC selecionadas
  skillCodes String[] // ["EF03MA09", "EF03MA10"] - referÃªncia aos cÃ³digos

  // Controle
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([userId, createdAt(sort: Desc)])
  @@index([educationLevelId, subjectId])
  @@map("lesson_plan")
}

// Controle de uso mensal (rate limiting)
model LessonPlanUsage {
  id        String   @id @default(cuid())
  userId    String
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  yearMonth String   // "2026-01" (formato YYYY-MM)
  count     Int      @default(0)

  updatedAt DateTime @updatedAt

  @@unique([userId, yearMonth])
  @@index([userId, yearMonth])
  @@map("lesson_plan_usage")
}
```

### 5.3 Estrutura do JSON de ConteÃºdo

**Armazenado no campo `content` (Json) do LessonPlan**

```typescript
// TypeScript Interface (para uso no frontend/backend)
interface LessonPlanContent {
  // IdentificaÃ§Ã£o (redundante com DB, mas facilita exportaÃ§Ã£o standalone)
  identification: {
    title: string               // "IntroduÃ§Ã£o Ã s FraÃ§Ãµes"
    educationLevel: string      // "Fundamental - Anos Iniciais"
    year: string                // "3Âº Ano"
    subject: string             // "MatemÃ¡tica"
    duration: {
      lessons: number           // 2
      minutesPerLesson: number  // 50
      totalMinutes: number      // 100
    }
  }

  // Habilidades BNCC selecionadas (com detalhes completos)
  bnccSkills: Array<{
    code: string                // "EF03MA09"
    description: string         // Texto completo da habilidade
    thematicUnit: string        // "NÃºmeros"
    knowledgeObject: string     // "FraÃ§Ã£o"
  }>

  // Objetivos de aprendizagem (gerados pela IA)
  objectives: string[]          // ["Compreender o conceito de fraÃ§Ã£o...", ...]

  // Metodologia (sequÃªncia didÃ¡tica)
  methodology: Array<{
    phase: string               // "IntroduÃ§Ã£o" | "Desenvolvimento" | "Fechamento"
    duration: string            // "15 min"
    description: string         // DescriÃ§Ã£o geral da fase
    activities: string[]        // Lista de atividades especÃ­ficas
  }>

  // Recursos/Materiais necessÃ¡rios
  resources: string[]           // ["Folhas de papel", "Tesoura", ...]

  // AvaliaÃ§Ã£o
  assessment: {
    criteria: string[]          // ["Identifica fraÃ§Ãµes simples", ...]
    instruments: string[]       // ["ObservaÃ§Ã£o durante atividade", ...]
  }

  // Metadados de geraÃ§Ã£o
  metadata: {
    generatedAt: string         // ISO 8601 timestamp
    model: string               // "gpt-4o-mini"
    tokensUsed?: number         // Rastreamento de custo (opcional)
  }
}
```

**Zod Schema para ValidaÃ§Ã£o (backend)**

```typescript
// src/lib/schemas/lesson-plan.ts
import { z } from 'zod'

export const LessonPlanContentSchema = z.object({
  identification: z.object({
    title: z.string().min(3).max(200),
    educationLevel: z.string(),
    year: z.string(),
    subject: z.string(),
    duration: z.object({
      lessons: z.number().int().min(1).max(3),
      minutesPerLesson: z.number().int().min(30).max(120),
      totalMinutes: z.number().int()
    })
  }),

  bnccSkills: z.array(
    z.object({
      code: z.string().regex(/^[A-Z]{2}\d{2}[A-Z]{2}\d{2}$/), // Formato BNCC
      description: z.string(),
      thematicUnit: z.string(),
      knowledgeObject: z.string()
    })
  ).min(1).max(3), // 1 a 3 habilidades

  objectives: z.array(z.string()).min(2).max(6),

  methodology: z.array(
    z.object({
      phase: z.enum(['IntroduÃ§Ã£o', 'Desenvolvimento', 'Fechamento']),
      duration: z.string(),
      description: z.string(),
      activities: z.array(z.string())
    })
  ).min(3).max(10), // Pelo menos 3 fases

  resources: z.array(z.string()).min(1).max(20),

  assessment: z.object({
    criteria: z.array(z.string()).min(2).max(8),
    instruments: z.array(z.string()).min(1).max(5)
  }),

  metadata: z.object({
    generatedAt: z.string().datetime(),
    model: z.string(),
    tokensUsed: z.number().optional()
  })
})

export type LessonPlanContent = z.infer<typeof LessonPlanContentSchema>
```

---

## 6. API Endpoints

### 6.1 BNCC (Consulta)

```
GET /api/v1/bncc/education-levels
    Retorna etapas de ensino (reutiliza EducationLevel existente)

    Response: [
      { slug: "educacao-infantil", name: "EducaÃ§Ã£o Infantil", order: 1 },
      { slug: "ensino-fundamental-1", name: "Ensino Fundamental I", order: 2 },
      { slug: "ensino-fundamental-2", name: "Ensino Fundamental II", order: 3 }
    ]

GET /api/v1/bncc/grades?educationLevelSlug=ensino-fundamental-1
    Retorna anos/sÃ©ries por etapa (reutiliza Grade existente)

    Response: [
      { slug: "ef1-1-ano", name: "1Âº ano", order: 1 },
      { slug: "ef1-2-ano", name: "2Âº ano", order: 2 },
      { slug: "ef1-3-ano", name: "3Âº ano", order: 3 },
      ...
    ]

GET /api/v1/bncc/subjects?educationLevelSlug=ensino-fundamental-1&gradeSlug=ef1-3-ano
    Retorna disciplinas/campos disponÃ­veis conforme etapa

    **Para EF (Ensino Fundamental):**
    Response: [
      { slug: "matematica", name: "MatemÃ¡tica" },
      { slug: "lingua-portuguesa", name: "LÃ­ngua Portuguesa" },
      { slug: "ciencias", name: "CiÃªncias" },
      { slug: "historia", name: "HistÃ³ria" },
      { slug: "geografia", name: "Geografia" },
      { slug: "arte", name: "Arte" },
      { slug: "educacao-fisica", name: "EducaÃ§Ã£o FÃ­sica" },
      { slug: "ensino-religioso", name: "Ensino Religioso" },
      // EF1: 8 componentes (SEM lÃ­ngua-inglesa)
      // EF2: 9 componentes (COM lÃ­ngua-inglesa)
    ]

    **Para EI (EducaÃ§Ã£o Infantil):**
    Response: [
      { slug: "ei-o-eu-o-outro-e-o-nos", name: "O eu, o outro e o nÃ³s" },
      { slug: "ei-corpo-gestos-e-movimentos", name: "Corpo, gestos e movimentos" },
      { slug: "ei-tracos-sons-cores-e-formas", name: "TraÃ§os, sons, cores e formas" },
      { slug: "ei-escuta-fala-pensamento-e-imaginacao", name: "Escuta, fala, pensamento e imaginaÃ§Ã£o" },
      { slug: "ei-espacos-tempos-quantidades-relacoes-e-transformacoes", name: "EspaÃ§os, tempos, quantidades, relaÃ§Ãµes e transformaÃ§Ãµes" }
      // EI: 5 campos de experiÃªncia (armazenados como Subject)
    ]

    **âš ï¸ IMPORTANTE ARQUITETURAL:**
    - **EF:** Subjects = Componentes Curriculares (MatemÃ¡tica, etc)
    - **EI:** Subjects = Campos de ExperiÃªncia (para facilitar filtros de recursos)
    - **BnccSkill.fieldOfExperience:** TambÃ©m armazena campo de experiÃªncia (denormalizado)

GET /api/v1/bncc/skills?educationLevelSlug=ensino-fundamental-1&gradeSlug=ef1-3-ano&subjectSlug=matematica&q=fraÃ§Ãµes
    Busca habilidades BNCC com filtros + Full-Text Search + Embeddings

    Query params:
    - educationLevelSlug (required): Slug da etapa
    - gradeSlug (required): Slug do ano/sÃ©rie
    - subjectSlug (required): Slug da disciplina
    - q (optional): Termo de busca (usa FTS + embeddings para melhor relevÃ¢ncia)
    - searchMode (optional): "fts" | "semantic" | "hybrid" (padrÃ£o: "hybrid")

    Response: {
      skills: [
        {
          id: "cuid",
          code: "EF03MA09",
          description: "Associar o quociente de uma divisÃ£o com resto zero...",
          unitTheme: "NÃºmeros",
          knowledgeObject: "FraÃ§Ã£o",
          gradeSlug: "ef1-3-ano",
          subjectSlug: "matematica"
        }
      ]
    }
```

**ImplementaÃ§Ã£o da busca FTS (Full-Text Search):**

```typescript
// src/app/api/v1/bncc/skills/route.ts
import { prisma } from '@/lib/db'
import { Prisma } from '@/prisma/generated/prisma/client'

export async function GET(req: Request) {
  const { searchParams } = new URL(req.url)
  const educationLevelSlug = searchParams.get('educationLevelSlug')
  const gradeSlug = searchParams.get('gradeSlug')
  const subjectSlug = searchParams.get('subjectSlug')
  const query = searchParams.get('q') // Termo de busca (opcional)

  if (!educationLevelSlug || !gradeSlug || !subjectSlug) {
    return Response.json({ error: 'Missing required params' }, { status: 400 })
  }

  // Busca com Full-Text Search (PostgreSQL)
  const skills = await prisma.$queryRaw<Array<{
    id: string
    code: string
    description: string
    unitTheme: string | null
    knowledgeObject: string | null
    gradeSlug: string
    subjectSlug: string
    rank?: number
  }>>`
    SELECT
      id,
      code,
      description,
      unit_theme as "unitTheme",
      knowledge_object as "knowledgeObject",
      grade_slug as "gradeSlug",
      subject_slug as "subjectSlug"
      ${query ? Prisma.sql`, ts_rank(search_vector, websearch_to_tsquery('portuguese', ${query})) as rank` : Prisma.empty}
    FROM bncc_skill
    WHERE education_level_slug = ${educationLevelSlug}
      AND grade_slug = ${gradeSlug}
      AND subject_slug = ${subjectSlug}
      ${query ? Prisma.sql`AND search_vector @@ websearch_to_tsquery('portuguese', ${query})` : Prisma.empty}
    ORDER BY ${query ? Prisma.sql`rank DESC,` : Prisma.empty} code ASC
    LIMIT 50
  `

  return Response.json({ skills })
}
```

### 6.2 Planos de Aula

```
GET /api/v1/lesson-plans
    Lista planos do usuÃ¡rio (Ãºltimos 20, ordenados por criaÃ§Ã£o DESC)

    Response: {
      plans: [
        {
          id: "cuid",
          title: "IntroduÃ§Ã£o Ã s FraÃ§Ãµes",
          educationLevel: { name: "..." },
          year: "3",
          subject: { name: "MatemÃ¡tica" },
          duration: 2,
          skillCodes: ["EF03MA09", "EF03MA10"],
          createdAt: "2026-01-15T10:30:00Z"
        }
      ],
      usage: { used: 3, limit: 15, remaining: 12 }
    }

POST /api/v1/lesson-plans
    Cria novo plano com geraÃ§Ã£o via IA

    Headers: Authorization (session)

    Body: {
      educationLevelId: string
      year: string              // "3"
      subjectId: string
      title: string
      duration: number          // 1, 2 ou 3
      skillCodes: string[]      // ["EF03MA09", "EF03MA10"]
    }

    ValidaÃ§Ãµes:
    - UsuÃ¡rio deve ser subscriber ou admin
    - Limite mensal nÃ£o atingido (< 15)
    - 1 a 3 habilidades BNCC
    - Habilidades devem existir no banco
    - DuraÃ§Ã£o entre 1 e 3 aulas

    Response: {
      plan: {
        id: "cuid",
        title: "...",
        content: { ... }, // LessonPlanContent
        skillCodes: [...],
        createdAt: "..."
      },
      downloadUrls: {
        word: "/api/v1/lesson-plans/{id}/download?format=docx",
        pdf: "/api/v1/lesson-plans/{id}/download?format=pdf"
      }
    }

    Errors:
    - 401: NÃ£o autenticado
    - 403: NÃ£o Ã© assinante / Limite mensal atingido
    - 400: ValidaÃ§Ã£o falhou
    - 500: Erro na geraÃ§Ã£o com IA

GET /api/v1/lesson-plans/:id
    Retorna plano especÃ­fico (apenas do prÃ³prio usuÃ¡rio ou admin)

    Response: {
      plan: { id, title, content, ... }
    }

GET /api/v1/lesson-plans/:id/download?format=docx|pdf
    Gera e retorna arquivo para download

    Query params:
    - format: "docx" | "pdf"

    Headers:
    - Content-Disposition: attachment; filename="plano-fracoes.docx"
    - Content-Type: application/vnd.openxmlformats-officedocument.wordprocessingml.document

    Response: Binary file (Word ou PDF)

GET /api/v1/lesson-plans/usage
    Retorna uso do mÃªs atual do usuÃ¡rio

    Response: {
      yearMonth: "2026-01",
      used: 3,
      limit: 15,
      remaining: 12,
      resetsAt: "2026-02-01T00:00:00Z"
    }
```

---

## 7. GeraÃ§Ã£o com IA

### 7.1 Prompt de GeraÃ§Ã£o

```typescript
const systemPrompt = `VocÃª Ã© um especialista em pedagogia brasileira.
Crie planos de aula alinhados Ã  BNCC, prÃ¡ticos e aplicÃ¡veis em sala de aula.

Diretrizes:
- Use linguagem simples e direta
- Sugira atividades prÃ¡ticas e interativas
- Considere recursos comuns em escolas pÃºblicas
- Divida o tempo de forma realista
- Inclua momentos de avaliaÃ§Ã£o formativa`

const userPrompt = `Crie um plano de aula com as seguintes especificaÃ§Ãµes:

**IdentificaÃ§Ã£o:**
- Ano: ${year}
- Disciplina: ${subject}
- Tema: ${title}
- DuraÃ§Ã£o: ${duration} aula(s) de 50 minutos

**Habilidades BNCC a desenvolver:**
${skills.map(s => `- ${s.code}: ${s.description}`).join('\n')}

**Formato de resposta:**
Retorne um JSON vÃ¡lido com a estrutura especificada.`
```

### 7.2 ImplementaÃ§Ã£o

```typescript
// src/app/api/v1/lesson-plans/route.ts
import { generateObject } from 'ai'
import { openai } from '@ai-sdk/openai'
import { LessonPlanContentSchema } from '@/lib/schemas/lesson-plan'

export async function POST(req: Request) {
  const session = await auth.api.getSession({ headers: req.headers })
  if (!session?.user) return unauthorized()

  // Verificar se Ã© assinante
  if (session.user.role !== 'subscriber' && session.user.role !== 'admin') {
    return forbidden('Apenas assinantes podem criar planos')
  }

  // Verificar limite mensal
  const usage = await getLessonPlanUsage(session.user.id)
  if (usage.count >= 15) {
    return forbidden('Limite de 15 planos/mÃªs atingido')
  }

  const body = await req.json()
  const { yearId, subjectId, title, duration, skillCodes } = body

  // Buscar habilidades completas
  const skills = await prisma.bnccSkill.findMany({
    where: { code: { in: skillCodes } }
  })

  // Gerar plano com IA
  const { object: content } = await generateObject({
    model: openai('gpt-4o-mini'),
    schema: LessonPlanContentSchema,
    system: systemPrompt,
    prompt: buildPrompt({ yearId, subjectId, title, duration, skills })
  })

  // Salvar plano
  const plan = await prisma.lessonPlan.create({
    data: {
      userId: session.user.id,
      title,
      yearId,
      subjectId,
      duration,
      content,
      skillCodes
    }
  })

  // Incrementar uso
  await incrementUsage(session.user.id)

  return Response.json({ plan })
}
```

---

## 8. ExportaÃ§Ã£o

### 8.1 Word (.docx)

```typescript
// src/lib/export/word.ts
import { Document, Paragraph, TextRun, Table } from 'docx'

export function generateWordDocument(plan: LessonPlanContent): Buffer {
  const doc = new Document({
    sections: [{
      children: [
        // TÃ­tulo
        new Paragraph({
          children: [
            new TextRun({ text: 'PLANO DE AULA', bold: true, size: 28 })
          ],
          alignment: 'center'
        }),

        // IdentificaÃ§Ã£o
        createIdentificationTable(plan),

        // Habilidades BNCC
        new Paragraph({
          children: [
            new TextRun({ text: 'HABILIDADES BNCC', bold: true })
          ]
        }),
        ...plan.skills.map(s =>
          new Paragraph({ text: `â€¢ ${s.code}: ${s.description}` })
        ),

        // Objetivos
        // Metodologia
        // Recursos
        // AvaliaÃ§Ã£o
        // ...
      ]
    }]
  })

  return Packer.toBuffer(doc)
}
```

### 8.2 PDF

```typescript
// src/lib/export/pdf.ts
// OpÃ§Ã£o 1: Renderizar HTML para PDF com Puppeteer/Playwright
// OpÃ§Ã£o 2: Usar react-pdf para gerar diretamente

import { renderToBuffer } from '@react-pdf/renderer'
import { LessonPlanPDF } from './templates/LessonPlanPDF'

export async function generatePDF(plan: LessonPlanContent): Promise<Buffer> {
  return renderToBuffer(<LessonPlanPDF plan={plan} />)
}
```

---

## 9. Componentes React

### 9.1 Estrutura de Arquivos

```
src/
â”œâ”€â”€ app/(client)/lesson-plans/
â”‚   â”œâ”€â”€ page.tsx                    # Lista de planos + empty state
â”‚   â””â”€â”€ layout.tsx
â”‚
â”œâ”€â”€ components/client/lesson-plans/
â”‚   â”‚
â”‚   â”‚  # Wizard de criaÃ§Ã£o (com bifurcaÃ§Ã£o EI vs EF)
â”‚   â”œâ”€â”€ create-plan-drawer.tsx      # Drawer principal
â”‚   â”œâ”€â”€ wizard-steps.tsx            # Indicador de progresso
â”‚   â”œâ”€â”€ step-stage.tsx              # Etapa 1: Etapa de ensino
â”‚   â”‚
â”‚   â”‚  # BifurcaÃ§Ã£o: EI vs EF
â”‚   â”œâ”€â”€ step-ei-age-field.tsx       # Etapa 1A (EI): Faixa etÃ¡ria + Campo exp.
â”‚   â”œâ”€â”€ step-ef-grade-subject.tsx   # Etapa 1B (EF): Ano + Disciplina
â”‚   â”‚
â”‚   â”œâ”€â”€ step-theme.tsx              # Etapa 2: Tema + DuraÃ§Ã£o (comum)
â”‚   â”‚
â”‚   â”‚  # Etapa 3 (busca de habilidades - lÃ³gica diferente)
â”‚   â”œâ”€â”€ step-skills.tsx             # Etapa 3: SeleÃ§Ã£o BNCC (switch EI/EF)
â”‚   â”œâ”€â”€ skill-selector-ei.tsx       # Seletor para EI (fieldOfExperience)
â”‚   â”œâ”€â”€ skill-selector-ef.tsx       # Seletor para EF (gradeSlug + subjectSlug)
â”‚   â”‚
â”‚   â”œâ”€â”€ step-review.tsx             # Etapa 4: Resumo (comum)
â”‚   â”‚
â”‚   â”‚  # Componentes de UI
â”‚   â”œâ”€â”€ plan-card.tsx               # Card de plano na lista
â”‚   â”œâ”€â”€ plan-list.tsx               # Lista de planos
â”‚   â”œâ”€â”€ empty-state.tsx             # Estado vazio com CTA
â”‚   â”œâ”€â”€ usage-progress.tsx          # Barra de uso mensal
â”‚   â”œâ”€â”€ generating-state.tsx        # Tela de loading
â”‚   â””â”€â”€ success-state.tsx           # Tela de sucesso + downloads
â”‚
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useLessonPlans.ts           # React Query - lista
â”‚   â”œâ”€â”€ useLessonPlanUsage.ts       # React Query - uso mensal
â”‚   â”œâ”€â”€ useBnccSkills.ts            # React Query - busca BNCC (com switch EI/EF)
â”‚   â””â”€â”€ useCreateLessonPlan.ts      # Mutation de criaÃ§Ã£o
â”‚
â””â”€â”€ services/lesson-plans/
    â”œâ”€â”€ list-plans.ts
    â”œâ”€â”€ create-plan.ts
    â”œâ”€â”€ generate-content.ts         # GeraÃ§Ã£o com IA
    â”œâ”€â”€ export-word.ts
    â””â”€â”€ export-pdf.ts
```

**âš ï¸ Nota sobre bifurcaÃ§Ã£o EI vs EF:**

O cÃ³digo do wizard precisa verificar `educationLevelSlug` para decidir qual fluxo seguir:

```typescript
// create-plan-drawer.tsx
const [educationLevelSlug, setEducationLevelSlug] = useState<string>()
const isEI = educationLevelSlug === 'educacao-infantil'

// Renderizar componentes diferentes
{currentStep === 1 && (
  isEI ? (
    <StepEiAgeField {...props} />  // Faixa etÃ¡ria + Campo de experiÃªncia
  ) : (
    <StepEfGradeSubject {...props} />  // Ano + Disciplina
  )
)}

// Hook de busca tambÃ©m precisa adaptar
// useBnccSkills.ts
const params = isEI
  ? { educationLevelSlug, ageRange, fieldOfExperience, q }
  : { educationLevelSlug, gradeSlug, subjectSlug, q }
```

---

## 10. ImportaÃ§Ã£o dos Dados da BNCC

### 10.1 Fonte Oficial

**URL:** [Base Nacional Comum Curricular - MEC](http://basenacionalcomum.mec.gov.br/)

**Formato recomendado:** Planilha Excel oficial do MEC contendo:
- CÃ³digos de habilidades (ex: EF03MA09, EI03TS01)
- DescriÃ§Ãµes completas
- Unidades temÃ¡ticas / Campos de experiÃªncia
- Objetos de conhecimento
- Etapas, anos e componentes curriculares

### 10.2 Estrutura da ImportaÃ§Ã£o

```typescript
// scripts/import-bncc.ts
import { prisma } from '@/lib/db'
import * as XLSX from 'xlsx'

interface BnccRow {
  codigo: string              // "EF03MA09" ou "EI03TS01"
  descricao: string           // Texto da habilidade
  etapa: string               // "EducaÃ§Ã£o Infantil", "Ensino Fundamental I", etc
  ano?: string                // "3Âº ano" (EF) ou "CrianÃ§as pequenas" (EI)
  componente?: string         // "MatemÃ¡tica" (EF) ou "TraÃ§os, sons..." (EI)
  unidadeTematica?: string    // "NÃºmeros" (apenas EF)
  objetoConhecimento?: string // "FraÃ§Ã£o" (apenas EF)
  comentarios?: string        // Campo auxiliar
  sugestoes?: string          // SugestÃµes curriculares
}

// Mapeamento de nomes legÃ­veis para slugs
const educationLevelMap: Record<string, string> = {
  'EducaÃ§Ã£o Infantil': 'educacao-infantil',
  'Ensino Fundamental I': 'ensino-fundamental-1',
  'Ensino Fundamental II': 'ensino-fundamental-2',
}

const gradeMap: Record<string, string> = {
  '1Âº ano': 'ef1-1-ano',
  '2Âº ano': 'ef1-2-ano',
  '3Âº ano': 'ef1-3-ano',
  // ... completar
  'BebÃªs': 'ei-bebes',
  'CrianÃ§as bem pequenas': 'ei-criancas-bem-pequenas',
  'CrianÃ§as pequenas': 'ei-criancas-pequenas',
}

const subjectMap: Record<string, string> = {
  'MatemÃ¡tica': 'matematica',
  'LÃ­ngua Portuguesa': 'lingua-portuguesa',
  'O eu, o outro e o nÃ³s': 'ei-o-eu-o-outro-e-o-nos',
  // ... completar
}

// FunÃ§Ã£o auxiliar: Expandir cÃ³digos multi-ano (EF12, EF15, EF67, etc)
function expandGrades(code: string, educationLevelSlug: string): string[] {
  // Extrair anos do cÃ³digo (ex: "EF12LP01" â†’ "12")
  const match = code.match(/^E[IF](\d{2})/)
  if (!match) return []

  const yearCode = match[1]

  // CÃ³digos multi-ano conhecidos
  const multiYearMap: Record<string, string[]> = {
    '12': ['ef1-1-ano', 'ef1-2-ano'],                    // Anos 1-2
    '15': ['ef1-1-ano', 'ef1-2-ano', 'ef1-3-ano', 'ef1-4-ano', 'ef1-5-ano'], // Anos 1-5
    '35': ['ef1-3-ano', 'ef1-4-ano', 'ef1-5-ano'],       // Anos 3-5
    '67': ['ef2-6-ano', 'ef2-7-ano'],                    // Anos 6-7
    '69': ['ef2-6-ano', 'ef2-7-ano', 'ef2-8-ano', 'ef2-9-ano'], // Anos 6-9
    '89': ['ef2-8-ano', 'ef2-9-ano'],                    // Anos 8-9
  }

  return multiYearMap[yearCode] || []
}

async function importBncc() {
  console.log('ğŸ“š Importando habilidades BNCC...')

  // 1. Ler planilha Excel
  const workbook = XLSX.readFile('./data/bncc-oficial.xlsx')
  const sheet = workbook.Sheets['Habilidades']
  const rows: BnccRow[] = XLSX.utils.sheet_to_json(sheet)

  let imported = 0
  let skipped = 0

  // 2. Para cada linha da planilha
  for (const row of rows) {
    try {
      // Mapear para slugs
      const educationLevelSlug = educationLevelMap[row.etapa]
      const gradeSlug = row.ano ? gradeMap[row.ano] : null
      const subjectSlug = row.componente ? subjectMap[row.componente] : null

      if (!educationLevelSlug) {
        console.warn(`âš ï¸  Etapa desconhecida: ${row.etapa}`)
        skipped++
        continue
      }

      // Detectar se Ã© EI ou EF pelo cÃ³digo
      const isEI = row.codigo.startsWith('EI')

      // âš ï¸ IMPORTANTE: Expandir cÃ³digos multi-ano (EF12, EF15, etc)
      const gradesToImport = expandGrades(row.codigo, educationLevelSlug)
      const finalGrades = gradesToImport.length > 0 ? gradesToImport : [gradeSlug]

      // Criar uma linha para cada ano do intervalo
      for (const currentGradeSlug of finalGrades) {
        if (!currentGradeSlug && !isEI) {
          console.warn(`âš ï¸  gradeSlug ausente para ${row.codigo}`)
          continue
        }

        // Criar habilidade BNCC
        // âš ï¸ Usar constraint correto: EI usa ageRange, EF usa gradeSlug
        const uniqueWhere = isEI
          ? {
              code_ageRange: {
                code: row.codigo,
                ageRange: currentGradeSlug || ''
              }
            }
          : {
              code_gradeSlug: {
                code: row.codigo,
                gradeSlug: currentGradeSlug || ''
              }
            }

        await prisma.bnccSkill.upsert({
          where: uniqueWhere,
          update: {
            description: row.descricao,
            comments: row.comentarios,
            curriculumSuggestions: row.sugestoes,
          },
          create: {
            code: row.codigo,
            description: row.descricao,
            educationLevelSlug,

            // Campos especÃ­ficos de EI
            fieldOfExperience: isEI ? row.componente : null,
            ageRange: isEI ? currentGradeSlug : null,

            // Campos especÃ­ficos de EF
            gradeSlug: !isEI ? currentGradeSlug : null,
            subjectSlug: !isEI ? subjectSlug : null,
            unitTheme: row.unidadeTematica,
            knowledgeObject: row.objetoConhecimento,

            // Auxiliares
            comments: row.comentarios,
            curriculumSuggestions: row.sugestoes,

            // search_vector serÃ¡ criado automaticamente pelo trigger SQL
          },
        })

        imported++
      }
    } catch (error) {
      console.error(`âŒ Erro ao importar ${row.codigo}:`, error)
      skipped++
    }
  }

  console.log(`âœ… ImportaÃ§Ã£o concluÃ­da: ${imported} habilidades, ${skipped} puladas`)
  console.log(`ğŸ’¡ CÃ³digos multi-ano (EF12, EF15, etc) foram expandidos automaticamente`)
}

importBncc()
```

### 10.3 ExtensÃµes do PostgreSQL

**O script `reset-db.sh` jÃ¡ cria as extensÃµes automaticamente:**

```sql
-- ExtensÃµes criadas automaticamente
CREATE EXTENSION IF NOT EXISTS vector;    # pgvector - para embeddings
CREATE EXTENSION IF NOT EXISTS unaccent;  # Remove acentos no FTS

# Cria trigger FTS
CREATE OR REPLACE FUNCTION bncc_skill_search_vector_update() RETURNS trigger AS $$
BEGIN
  NEW."searchVector" :=
    setweight(to_tsvector('portuguese', unaccent(coalesce(NEW."code", ''))), 'A') ||
    setweight(to_tsvector('portuguese', unaccent(coalesce(NEW."description", ''))), 'A') ||
    setweight(to_tsvector('portuguese', unaccent(coalesce(NEW."unitTheme", ''))), 'B') ||
    setweight(to_tsvector('portuguese', unaccent(coalesce(NEW."knowledgeObject", ''))), 'B') ||
    setweight(to_tsvector('portuguese', unaccent(coalesce(NEW."comments", ''))), 'C') ||
    setweight(to_tsvector('portuguese', unaccent(coalesce(NEW."curriculumSuggestions", ''))), 'C');
  RETURN NEW;
END
$$ LANGUAGE plpgsql;

# Cria Ã­ndice GIN
CREATE INDEX IF NOT EXISTS bncc_skill_search_gin
ON "bncc_skill" USING GIN ("searchVector");
```

**âœ… NÃ£o precisa fazer nada manualmente!**

---

### 10.4 CaracterÃ­sticas do FTS Implementado

**O que o trigger FTS faz:**

1. **Usa `unaccent`** para remover acentos
   - "matemÃ¡tica" encontra "matematica"
   - "fraÃ§Ã£o" encontra "fracao"

2. **Pesos diferentes por campo:**
   - **Peso A** (mais importante): `code`, `description`
   - **Peso B** (mÃ©dio): `unitTheme`, `knowledgeObject`
   - **Peso C** (menos): `comments`, `curriculumSuggestions`

3. **Busca inteligente:**
   ```sql
   -- Busca com ranking automÃ¡tico
   WHERE "searchVector" @@ websearch_to_tsquery('portuguese', 'fraÃ§Ã£o')
   ORDER BY ts_rank("searchVector", websearch_to_tsquery('portuguese', 'fraÃ§Ã£o')) DESC
   ```

4. **AtualizaÃ§Ã£o automÃ¡tica:**
   - Trigger roda em BEFORE INSERT OR UPDATE
   - Qualquer mudanÃ§a no registro atualiza o searchVector

**âœ… Tudo gerenciado pelo `reset-db.sh`**

---

### 10.5 Embeddings (Busca SemÃ¢ntica)

**Por que usar embeddings no MVP:**
- âœ… **Busca semÃ¢ntica**: "operaÃ§Ãµes matemÃ¡ticas" encontra "adiÃ§Ã£o e subtraÃ§Ã£o"
- âœ… **Similaridade**: Encontrar habilidades relacionadas mesmo com termos diferentes
- âœ… **Melhor experiÃªncia**: Professoras nÃ£o precisam usar termos exatos da BNCC
- âœ… **Custo baixo**: ~$0.015 uma vez (menos de 2 centavos!)

**Como gerar embeddings:**

```bash
# 1. Configurar .env
OPENAI_API_KEY=sk-proj-...
EMBED_MODEL=text-embedding-3-small  # PadrÃ£o
EMBED_BATCH_SIZE=100                # PadrÃ£o

# 2. Executar script
npx tsx scripts/embed.ts

# Exemplo de output:
# ğŸ”§ Backfill de embeddings
#    Modelo: text-embedding-3-small
#    Batch size: 100
#    Delay entre batches: 1000ms
#
# ğŸ“Š Pendentes: 1,547 habilidades
# ğŸ’° Custo estimado: ~$0.0155 (773,500 tokens)
# â±ï¸  Tempo estimado: ~16 batches Ã— 1000ms
#
# Batch #1: 100/100 salvos | Progresso: 100/1547 (6.5%) | Restam: 1447
# ...
# âœ… ConcluÃ­do! 1547 embeddings gerados.
```

**Criar Ã­ndice IVFFlat (depois de gerar embeddings):**

```sql
-- Executar no SQL Editor do Neon ou Prisma Studio
CREATE INDEX IF NOT EXISTS bncc_skill_embedding_idx
ON "bncc_skill"
USING ivfflat (embedding vector_cosine_ops)
WITH (lists = 100);

-- Verificar Ã­ndice criado
SELECT indexname, indexdef
FROM pg_indexes
WHERE tablename = 'bncc_skill' AND indexname LIKE '%embedding%';
```

**Busca por similaridade (depois de criar Ã­ndice):**

```typescript
// Exemplo: Encontrar habilidades similares
const { embeddings } = await embed({
  model: openai.embedding('text-embedding-3-small'),
  value: 'operaÃ§Ãµes matemÃ¡ticas bÃ¡sicas'
})

const similar = await prisma.$queryRaw<Array<{
  code: string
  description: string
  distance: number
}>>`
  SELECT
    code,
    description,
    embedding <=> ${`[${embeddings[0].join(',')}]`}::vector(1536) as distance
  FROM bncc_skill
  WHERE grade_slug = 'ef1-3-ano'
    AND subject_slug = 'matematica'
  ORDER BY distance ASC
  LIMIT 10
`
```

**Custo estimado:**
- **text-embedding-3-small**: $0.020 / 1M tokens
- **1.500 habilidades**: ~$0.015 (uma vez)
- **ManutenÃ§Ã£o**: Apenas novos registros

**DecisÃ£o para MVP:**
- âœ… **Embeddings no MVP** - busca semÃ¢ntica desde o inÃ­cio
- âœ… **FTS como fallback** - para buscas exatas e rÃ¡pidas
- ğŸ¯ **Melhor de ambos** - combinar FTS + embeddings conforme necessidade

---

### 10.6 ValidaÃ§Ã£o PÃ³s-ImportaÃ§Ã£o

```typescript
// scripts/validate-bncc.ts
import { prisma } from '@/lib/db'

async function validateBncc() {
  console.log('ğŸ” Validando importaÃ§Ã£o BNCC...\n')

  // 1. Contar habilidades por etapa
  const countsByLevel = await prisma.$queryRaw<Array<{
    educationLevelSlug: string
    total: number
  }>>`
    SELECT
      education_level_slug as "educationLevelSlug",
      COUNT(*) as total
    FROM bncc_skill
    GROUP BY education_level_slug
    ORDER BY education_level_slug
  `

  console.log('ğŸ“Š Habilidades por etapa:')
  console.table(countsByLevel)

  // 2. Contar habilidades por grade
  const countsByGrade = await prisma.$queryRaw<Array<{
    gradeSlug: string
    total: number
  }>>`
    SELECT
      grade_slug as "gradeSlug",
      COUNT(*) as total
    FROM bncc_skill
    WHERE grade_slug IS NOT NULL
    GROUP BY grade_slug
    ORDER BY grade_slug
  `

  console.log('\nğŸ“š Habilidades por ano/sÃ©rie:')
  console.table(countsByGrade)

  // 3. Verificar habilidades sem search_vector
  const withoutFTS = await prisma.bnccSkill.count({
    where: { searchVector: null }
  })

  if (withoutFTS > 0) {
    console.error(`\nâš ï¸  ${withoutFTS} habilidades SEM search_vector (trigger nÃ£o funcionou!)`)
  } else {
    console.log('\nâœ… Todas as habilidades tÃªm search_vector')
  }

  // 4. Testar busca FTS
  console.log('\nğŸ” Testando Full-Text Search...')
  const testResults = await prisma.$queryRaw<Array<{
    code: string
    description: string
  }>>`
    SELECT code, LEFT(description, 60) as description
    FROM bncc_skill
    WHERE search_vector @@ websearch_to_tsquery('portuguese', 'fraÃ§Ã£o')
    LIMIT 3
  `

  console.log('Resultados para "fraÃ§Ã£o":')
  console.table(testResults)

  console.log('\nâœ… ValidaÃ§Ã£o concluÃ­da!')
}

validateBncc()
```

---

## 11. Fases de ImplementaÃ§Ã£o

> **DependÃªncias:** Ver [PRD-00: Infraestrutura](./00-INFRASTRUCTURE-DEPENDENCIES.md)

---

### âœ… PRÃ‰-REQUISITOS (Antes de ComeÃ§ar)

**Certifique-se de que estÃ¡ pronto:**

- [x] **Taxonomia BNCC semeada** (`prisma/seeds/seed-taxonomy.ts`)
  - **3 EducationLevels:** EI, EF1, EF2 (nÃ£o inclui Ensino MÃ©dio)
  - **12 Grades:** 3 EI + 5 EF1 + 4 EF2
  - **14 Subjects:** 5 campos EI + 9 componentes EF
  - **GradeSubject:** Apenas para EF (EI nÃ£o tem)
  - **ValidaÃ§Ã£o:** EF1 tem 8 componentes (SEM inglÃªs), EF2 tem 9 (COM inglÃªs)

- [ ] **Seeds BNCC criados**
  - `prisma/seeds/seed-bncc-infantil.ts` âœ… (criado)
  - `prisma/seeds/seed-bncc-fundamental.ts` âœ… (criado)
  - `prisma/seeds/index.ts` âœ… (integrado)

- [ ] **Dados BNCC baixados**
  - TSV da EducaÃ§Ã£o Infantil â†’ `prisma/seeds/data/bncc_infantil.tsv`
  - TSV do Ensino Fundamental â†’ `prisma/seeds/data/bncc_fundamental.tsv`

- [ ] **Arquitetura confirmada**
  - EI NÃƒO usa Subject.slug (usa fieldOfExperience em BnccSkill)
  - EF USA Subject.slug (MatemÃ¡tica, PortuguÃªs, etc)
  - EF1 tem 8 componentes, EF2 tem 9 componentes

- [ ] **Embeddings confirmados**
  - âœ… **MVP COM embeddings** - busca semÃ¢ntica + FTS
  - Script pronto: `scripts/embed.ts` (~$0.015, 15-20 min)
  - Custo baixo e valor alto para experiÃªncia do usuÃ¡rio

**Quando tudo estiver âœ…, prossiga para Fase 0.**

---

### ğŸ“¦ Fase 0: PreparaÃ§Ã£o e Setup (15-30 min)

**Objetivo:** Instalar dependÃªncias e confirmar dados BNCC

**Checklist:**
- [ ] **Instalar dependÃªncias de IA**
  ```bash
  npm install ai @ai-sdk/openai
  ```
- [ ] **Configurar variÃ¡veis de ambiente** (.env)
  ```env
  OPENAI_API_KEY=sk-proj-...
  ```
- [ ] **Confirmar TSVs BNCC existem**
  - EducaÃ§Ã£o Infantil: `prisma/seeds/data/bncc_infantil.tsv`
  - Ensino Fundamental: `prisma/seeds/data/bncc_fundamental.tsv`
  - âš ï¸ Se nÃ£o tiver, baixar de: http://basenacionalcomum.mec.gov.br/

**âš ï¸ IMPORTANTE:**
- O script `scripts/reset-db.sh` JÃ configura tudo:
  - Cria extensÃµes (vector, unaccent)
  - Cria trigger FTS automaticamente
  - Cria Ã­ndice GIN automaticamente
  - Faz backfill do searchVector apÃ³s seed
- **NÃ£o precisa** fazer setup manual de banco!

**Bloqueadores:** Nenhum
**Entrega:** DependÃªncias instaladas e TSVs prontos

---

### ğŸ—„ï¸ Fase 1: Base de Dados BNCC (1-2 dias)

**Objetivo:** Importar todas as habilidades BNCC para o banco de dados

**Checklist:**
- [ ] **1.1 - Schema Prisma**
  - [ ] Criar model `BnccSkill` no `schema.prisma`
  - [ ] Executar: `npx prisma migrate dev --name add_bncc_skill`
  - [ ] Verificar migration criada

- [ ] **1.2 - Confirmar schema BnccSkill**
  - [ ] Verificar que campo `embedding` foi removido (sÃ³ FTS agora)
  - [ ] Verificar Ã­ndices: educationLevelSlug, gradeSlug, subjectSlug, code
  - [ ] Verificar unique compostos: code_gradeSlug, code_ageRange

- [ ] **1.3 - Executar Script de Reset Completo**
  - [ ] Verificar TSVs em `prisma/seeds/data/`
  - [ ] Executar: `./scripts/reset-db.sh`
  - [ ] O script faz TUDO:
    - Drop/cria schema public
    - Cria extensÃµes (vector, unaccent)
    - Aplica schema Prisma
    - Cria trigger FTS automaticamente
    - Cria Ã­ndice GIN automaticamente
    - Roda seeds (EI + EF)
    - Faz backfill do searchVector
    - Gera build
  - [ ] Verificar console: Deve mostrar imports EI + EF

- [ ] **1.4 - ValidaÃ§Ã£o**
  - [ ] Criar `scripts/validate-bncc.ts`
  - [ ] Contar habilidades por etapa
  - [ ] Contar habilidades por ano
  - [ ] Verificar search_vector populado
  - [ ] Testar busca FTS com "fraÃ§Ã£o"
  - [ ] Executar: `npx tsx scripts/validate-bncc.ts`

- [ ] **1.5 - Gerar Embeddings (Busca SemÃ¢ntica)**
  - [ ] Configurar OpenAI no .env: `OPENAI_API_KEY=sk-proj-...`
  - [ ] Executar: `npx tsx scripts/embed.ts`
  - [ ] Aguardar conclusÃ£o (~15-20 min para ~1.900 habilidades)
  - [ ] Custo: ~$0.015 (text-embedding-3-small)
  - [ ] Verificar log de progresso (batch, percentual)

- [ ] **1.6 - Criar Ãndice IVFFlat**
  - [ ] Executar SQL no Neon Console ou Prisma Studio:
    ```sql
    CREATE INDEX IF NOT EXISTS bncc_skill_embedding_idx
    ON "bncc_skill"
    USING ivfflat (embedding vector_cosine_ops)
    WITH (lists = 100);
    ```
  - [ ] Verificar Ã­ndice criado:
    ```sql
    SELECT indexname FROM pg_indexes
    WHERE tablename = 'bncc_skill' AND indexname LIKE '%embedding%';
    ```

**Bloqueadores:** Fase 0 concluÃ­da
**Entrega:** ~1.900 habilidades BNCC importadas e validadas com FTS + Embeddings operacionais

---

### ğŸ”Œ Fase 2: APIs de Consulta BNCC (1 dia)

**Objetivo:** Endpoints para o wizard consumir

**Checklist:**
- [ ] **2.1 - GET /api/v1/bncc/education-levels**
  - [ ] Retornar lista de EducationLevel (slug, name, order)
  - [ ] Testar no Postman/Insomnia

- [ ] **2.2 - GET /api/v1/bncc/grades?educationLevelSlug=...**
  - [ ] Retornar grades filtrados por etapa
  - [ ] Testar com `ensino-fundamental-1`
  - [ ] Testar com `educacao-infantil`

- [ ] **2.3 - GET /api/v1/bncc/subjects?educationLevelSlug=...&gradeSlug=...**
  - [ ] Retornar subjects vÃ¡lidos para o grade (via GradeSubject)
  - [ ] Testar com EF1 (deve retornar 8 disciplinas - SEM inglÃªs)
  - [ ] Testar com EF2 (deve retornar 9 disciplinas - COM inglÃªs)
  - [ ] Testar com EI (deve retornar 5 campos de experiÃªncia)

- [ ] **2.4 - GET /api/v1/bncc/skills?...** (Busca HÃ­brida)
  - [ ] Implementar busca hÃ­brida (FTS + Embeddings)
  - [ ] Suportar filtros: educationLevelSlug, gradeSlug, subjectSlug, q (busca)
  - [ ] Suportar bifurcaÃ§Ã£o EI (ageRange + fieldOfExperience)
  - [ ] Implementar 3 modos:
    - `searchMode=fts`: Apenas Full-Text Search (rÃ¡pido)
    - `searchMode=semantic`: Apenas embeddings (semÃ¢ntico)
    - `searchMode=hybrid`: Combina ambos com peso (padrÃ£o)
  - [ ] Testar busca por "fraÃ§Ã£o" (EF) - deve encontrar variaÃ§Ãµes
  - [ ] Testar busca por "operaÃ§Ãµes bÃ¡sicas" - deve encontrar adiÃ§Ã£o, subtraÃ§Ã£o
  - [ ] Limitar a 50 resultados
  - [ ] Ordenar por relevÃ¢ncia (ts_rank + vector distance)

**Bloqueadores:** Fase 1 concluÃ­da
**Entrega:** APIs testadas e funcionando

---

### ğŸ“ Fase 3: Schema de Planos + Controle de Uso (1 dia)

**Objetivo:** Estrutura para salvar planos e limitar uso mensal

**Checklist:**
- [ ] **3.1 - Schema Prisma**
  - [ ] Criar model `LessonPlan`
  - [ ] Criar model `LessonPlanUsage`
  - [ ] Executar migration
  - [ ] Gerar Prisma Client

- [ ] **3.2 - Zod Schema de ValidaÃ§Ã£o**
  - [ ] Criar `lib/schemas/lesson-plan.ts`
  - [ ] Implementar `LessonPlanContentSchema`
  - [ ] Validar estrutura do JSON (identification, bnccSkills, objectives, etc)

- [ ] **3.3 - Services de Controle**
  - [ ] Criar `services/lesson-plans/get-usage.ts`
  - [ ] Criar `services/lesson-plans/increment-usage.ts`
  - [ ] Implementar lÃ³gica de year-month (YYYY-MM)

- [ ] **3.4 - API de Uso**
  - [ ] GET /api/v1/lesson-plans/usage
  - [ ] Retornar: used, limit, remaining, resetsAt
  - [ ] Testar com usuÃ¡rio autenticado

**Bloqueadores:** Fase 0 concluÃ­da
**Entrega:** Estrutura de dados pronta para receber planos

---

### ğŸ¤– Fase 4: GeraÃ§Ã£o com IA (2-3 dias)

**Objetivo:** Endpoint que gera plano de aula usando OpenAI

**Checklist:**
- [ ] **4.1 - Prompts**
  - [ ] Criar `lib/ai/prompts/lesson-plan.ts`
  - [ ] Implementar `systemPrompt` (especialista em pedagogia)
  - [ ] Implementar `buildUserPrompt()` (com habilidades BNCC)
  - [ ] Revisar com professora real (se possÃ­vel)

- [ ] **4.2 - Service de GeraÃ§Ã£o**
  - [ ] Criar `services/lesson-plans/generate-content.ts`
  - [ ] Implementar `generateLessonPlanContent()` com `generateObject()`
  - [ ] Usar `gpt-4o-mini` (custo-benefÃ­cio)
  - [ ] Validar output com Zod schema
  - [ ] Tratar erros da OpenAI

- [ ] **4.3 - API POST /api/v1/lesson-plans**
  - [ ] Validar autenticaÃ§Ã£o (session)
  - [ ] Validar assinante (role === 'subscriber' || 'admin')
  - [ ] Verificar limite mensal (< 15)
  - [ ] Buscar habilidades BNCC completas (cÃ³digos â†’ objetos completos)
  - [ ] Gerar conteÃºdo com IA
  - [ ] Salvar no banco (LessonPlan)
  - [ ] Incrementar uso (LessonPlanUsage)
  - [ ] Retornar plano + URLs de download

- [ ] **4.4 - Testes**
  - [ ] Testar com EF (MatemÃ¡tica, 3Âº ano, fraÃ§Ãµes)
  - [ ] Testar com EI (Campo de experiÃªncia)
  - [ ] Validar qualidade do plano gerado
  - [ ] Verificar tempo de geraÃ§Ã£o (~30s)
  - [ ] Testar erro quando limite atingido

**Bloqueadores:** Fase 2 e 3 concluÃ­das
**Entrega:** GeraÃ§Ã£o de planos funcionando

---

### ğŸ¨ Fase 5: Wizard UI - Base (2-3 dias)

**Objetivo:** Interface do wizard (sem bifurcaÃ§Ã£o ainda)

**Checklist:**
- [ ] **5.1 - Estrutura Base**
  - [ ] Criar `create-plan-drawer.tsx` (Vaul Drawer)
  - [ ] Criar `wizard-steps.tsx` (indicador de progresso)
  - [ ] Implementar navegaÃ§Ã£o (voltar/continuar)
  - [ ] Implementar state management (useState ou zustand)

- [ ] **5.2 - Step 1: SeleÃ§Ã£o de Etapa**
  - [ ] Criar `step-stage.tsx`
  - [ ] Buscar etapas de ensino (API)
  - [ ] Renderizar cards grandes (mobile-friendly)
  - [ ] Implementar seleÃ§Ã£o

- [ ] **5.3 - Step 2: Tema + DuraÃ§Ã£o**
  - [ ] Criar `step-theme.tsx`
  - [ ] Input de tÃ­tulo do plano
  - [ ] SeleÃ§Ã£o de nÃºmero de aulas (1, 2, 3)
  - [ ] Calcular duraÃ§Ã£o total (aulas Ã— 50min)

- [ ] **5.4 - Step 4: RevisÃ£o**
  - [ ] Criar `step-review.tsx`
  - [ ] Mostrar resumo de tudo selecionado
  - [ ] BotÃ£o "Editar" para cada seÃ§Ã£o
  - [ ] BotÃ£o "Gerar Meu Plano"

- [ ] **5.5 - Loading + Sucesso**
  - [ ] Criar `generating-state.tsx` (loading animado)
  - [ ] Criar `success-state.tsx` (com botÃµes de download)
  - [ ] Adicionar progress bar fake (UX)

**Bloqueadores:** Fase 4 concluÃ­da
**Entrega:** Wizard bÃ¡sico funcionando (sem bifurcaÃ§Ã£o)

---

### ğŸ”€ Fase 6: BifurcaÃ§Ã£o EI vs EF (2 dias)

**Objetivo:** Implementar fluxos diferentes para EI e EF

**Checklist:**
- [ ] **6.1 - Step 1A: EI (Faixa EtÃ¡ria + Campo de ExperiÃªncia)**
  - [ ] Criar `step-ei-age-field.tsx`
  - [ ] Buscar faixas etÃ¡rias (Grades de EI)
  - [ ] Buscar campos de experiÃªncia (Subjects de EI)
  - [ ] Implementar seleÃ§Ã£o

- [ ] **6.2 - Step 1B: EF (Ano + Disciplina)**
  - [ ] Criar `step-ef-grade-subject.tsx`
  - [ ] Buscar anos (Grades de EF)
  - [ ] Buscar disciplinas (Subjects vÃ¡lidos para o Grade)
  - [ ] Implementar seleÃ§Ã£o em grade (chips)

- [ ] **6.3 - LÃ³gica de BifurcaÃ§Ã£o**
  - [ ] No drawer, detectar: `isEI = educationLevelSlug === 'educacao-infantil'`
  - [ ] Renderizar Step 1A se EI, Step 1B se EF
  - [ ] Ajustar labels do indicador de progresso

- [ ] **6.4 - Step 3: Busca de Habilidades (com bifurcaÃ§Ã£o)**
  - [ ] Criar `step-skills.tsx` (wrapper)
  - [ ] Criar `skill-selector-ei.tsx` (busca por ageRange + fieldOfExperience)
  - [ ] Criar `skill-selector-ef.tsx` (busca por gradeSlug + subjectSlug)
  - [ ] Implementar busca FTS com debounce
  - [ ] Limitar seleÃ§Ã£o (1 a 3 habilidades)
  - [ ] Mostrar contador "X de 3 selecionadas"

- [ ] **6.5 - Hook de Busca**
  - [ ] Criar `useBnccSkills.ts`
  - [ ] Implementar switch EI/EF nos params
  - [ ] Adicionar debounce (500ms)
  - [ ] Cachear com React Query

**Bloqueadores:** Fase 5 concluÃ­da
**Entrega:** Wizard completo com bifurcaÃ§Ã£o EI/EF

---

### ğŸ“¥ Fase 7: ExportaÃ§Ã£o (Word + PDF) (2-3 dias)

**Objetivo:** Gerar arquivos .docx e .pdf para download

**Checklist:**
- [ ] **7.1 - InstalaÃ§Ã£o**
  - [ ] `npm install docx`
  - [ ] `npm install @react-pdf/renderer`

- [ ] **7.2 - Template Word**
  - [ ] Criar `lib/export/word-template.ts`
  - [ ] Implementar estrutura: TÃ­tulo, IdentificaÃ§Ã£o, Habilidades BNCC, Objetivos, Metodologia, Recursos, AvaliaÃ§Ã£o
  - [ ] Testar geraÃ§Ã£o local
  - [ ] Validar abertura no Word/Google Docs

- [ ] **7.3 - Template PDF**
  - [ ] Criar `lib/export/pdf-template.tsx`
  - [ ] Implementar layout similar ao Word
  - [ ] Testar geraÃ§Ã£o local

- [ ] **7.4 - Services**
  - [ ] Criar `services/lesson-plans/export-word.ts`
  - [ ] Criar `services/lesson-plans/export-pdf.ts`
  - [ ] Retornar Buffer

- [ ] **7.5 - API de Download**
  - [ ] GET /api/v1/lesson-plans/:id/download?format=docx|pdf
  - [ ] Validar ownership (apenas dono ou admin)
  - [ ] Gerar arquivo
  - [ ] Retornar com headers corretos (Content-Disposition, Content-Type)
  - [ ] Testar download no navegador

**Bloqueadores:** Fase 4 concluÃ­da
**Entrega:** Download de planos funcionando

---

### ğŸ“š Fase 8: Lista e HistÃ³rico (2 dias)

**Objetivo:** Tela principal com lista de planos criados

**Checklist:**
- [ ] **8.1 - PÃ¡gina Principal**
  - [ ] Criar `app/(client)/lesson-plans/page.tsx`
  - [ ] Implementar layout responsivo
  - [ ] Adicionar botÃ£o "Criar Novo Plano" (abre drawer)

- [ ] **8.2 - Empty State**
  - [ ] Criar `empty-state.tsx`
  - [ ] IlustraÃ§Ã£o/Ã­cone
  - [ ] Texto motivacional
  - [ ] BotÃ£o CTA: "Criar Meu Primeiro Plano"
  - [ ] Mostrar "15 planos disponÃ­veis este mÃªs"

- [ ] **8.3 - Lista de Planos**
  - [ ] Criar `plan-list.tsx`
  - [ ] Criar `plan-card.tsx`
  - [ ] Mostrar: tÃ­tulo, etapa, ano, disciplina, data, botÃµes download
  - [ ] Ordenar por data (mais recentes primeiro)
  - [ ] Limitar a 20 planos

- [ ] **8.4 - Barra de Uso**
  - [ ] Criar `usage-progress.tsx`
  - [ ] Mostrar: "VocÃª criou X de 15 planos este mÃªs"
  - [ ] Progress bar visual
  - [ ] Aviso quando prÃ³ximo do limite

- [ ] **8.5 - APIs**
  - [ ] GET /api/v1/lesson-plans (lista)
  - [ ] GET /api/v1/lesson-plans/:id (detalhes)

- [ ] **8.6 - Hooks**
  - [ ] Criar `useLessonPlans.ts` (React Query)
  - [ ] Criar `useLessonPlanUsage.ts` (React Query)

**Bloqueadores:** Fase 7 concluÃ­da
**Entrega:** Tela de planos funcionando

---

### âœ¨ Fase 9: Polimento e LanÃ§amento (1-2 dias)

**Objetivo:** Ajustes finais e preparaÃ§Ã£o para produÃ§Ã£o

**Checklist:**
- [ ] **9.1 - OtimizaÃ§Ã£o de Prompts**
  - [ ] Testar com 5 temas diferentes (EF)
  - [ ] Testar com 3 temas diferentes (EI)
  - [ ] Validar qualidade com professora real
  - [ ] Ajustar prompts se necessÃ¡rio

- [ ] **9.2 - UX/UI**
  - [ ] Revisar responsividade mobile (80% do trÃ¡fego)
  - [ ] Adicionar loading states em todas as aÃ§Ãµes
  - [ ] Adicionar toasts de sucesso/erro (sonner)
  - [ ] Validar todos os formulÃ¡rios (Zod)
  - [ ] Mensagens de erro amigÃ¡veis

- [ ] **9.3 - Performance**
  - [ ] Adicionar debounce na busca de habilidades
  - [ ] Cachear listas de educationLevels, grades, subjects
  - [ ] Otimizar queries SQL (EXPLAIN ANALYZE)

- [ ] **9.4 - Monitoramento**
  - [ ] Adicionar logging de tokens usados (custo)
  - [ ] Adicionar analytics (planos criados, downloads)
  - [ ] Configurar alertas (se custo > $50/mÃªs)

- [ ] **9.5 - Testes Finais**
  - [ ] Testar fluxo completo EI (ponta a ponta)
  - [ ] Testar fluxo completo EF (ponta a ponta)
  - [ ] Testar limite mensal
  - [ ] Testar re-download de plano antigo
  - [ ] Testar no mobile (Chrome DevTools)

**Bloqueadores:** Fase 8 concluÃ­da
**Entrega:** Feature pronta para produÃ§Ã£o! ğŸš€

---

## ğŸ“Š Resumo de Tempo Estimado

| Fase | DescriÃ§Ã£o | Tempo | Acumulado |
|------|-----------|-------|-----------|
| 0 | PreparaÃ§Ã£o e Setup | 1h | 1h |
| 1 | Base de Dados BNCC | 1-2 dias | 2 dias |
| 2 | APIs de Consulta | 1 dia | 3 dias |
| 3 | Schema + Controle de Uso | 1 dia | 4 dias |
| 4 | GeraÃ§Ã£o com IA | 2-3 dias | 7 dias |
| 5 | Wizard UI - Base | 2-3 dias | 10 dias |
| 6 | BifurcaÃ§Ã£o EI vs EF | 2 dias | 12 dias |
| 7 | ExportaÃ§Ã£o (Word/PDF) | 2-3 dias | 15 dias |
| 8 | Lista e HistÃ³rico | 2 dias | 17 dias |
| 9 | Polimento | 1-2 dias | **19 dias** |

**Total:** ~3-4 semanas (trabalhando solo, full-time)

---

## 12. MÃ©tricas de Sucesso

| MÃ©trica | Meta MÃªs 1 | Meta MÃªs 3 |
|---------|------------|------------|
| % assinantes que usam | 40% | 60% |
| Planos criados/mÃªs | 500 | 2.000 |
| Taxa de download | 90% | 95% |
| Planos/usuÃ¡rio/mÃªs | 4 | 8 |
| Custo mÃ©dio/usuÃ¡rio | $0.005 | $0.010 |

**Indicadores de qualidade:**
- Planos baixados vs criados (sucesso se > 90%)
- UsuÃ¡rios que criam 2+ planos (retenÃ§Ã£o)
- Feedback qualitativo (pesquisa pÃ³s-geraÃ§Ã£o)

---

## 13. Riscos e MitigaÃ§Ãµes

| Risco | Probabilidade | Impacto | MitigaÃ§Ã£o |
|-------|---------------|---------|-----------|
| Plano genÃ©rico demais | MÃ©dia | Alto | Prompt detalhado + habilidades especÃ­ficas + testes com professoras reais |
| Professora nÃ£o entende wizard | MÃ©dia | Alto | UX ultra-simples, uma pergunta por vez, testes de usabilidade |
| Habilidade BNCC errada | Baixa | Alto | Professora seleciona manualmente (nÃ£o IA sugere) |
| Custo de IA alto | Baixa | MÃ©dio | Limite de 15/mÃªs, gpt-4o-mini, monitoramento de tokens |
| Dados BNCC desatualizados | Baixa | MÃ©dio | Usar fonte oficial MEC, script de re-importaÃ§Ã£o |
| ExportaÃ§Ã£o nÃ£o abre na escola | MÃ©dia | Alto | Testar com Word/Google Docs reais, formato .docx padrÃ£o |

---

## 14. FAQ

**P: Por que nÃ£o usar chat conversacional?**
R: Professoras tÃªm dificuldade com tecnologia. Wizard com botÃµes Ã© mais rÃ¡pido e menos propenso a erros.

**P: Por que a professora seleciona as habilidades BNCC?**
R: DÃ¡ controle e auditabilidade. Coordenador nÃ£o questiona "a IA escolheu errado".

**P: Por que limite de 15 planos/mÃªs?**
R: Suficiente para uso real (~1 plano/dia Ãºtil), custo baixo ($0.02/usuÃ¡rio), evita abuso.

**P: E se a professora precisar de mais?**
R: Pode ser upsell futuro (plano premium com mais planos).

**P: Funciona para EducaÃ§Ã£o Infantil?**
R: Sim, mas usa "Campos de ExperiÃªncia" ao invÃ©s de disciplinas (conforme BNCC).

**P: Como garantir que a IA gera planos de qualidade?**
R: Prompts especÃ­ficos + habilidades BNCC selecionadas + testes com professoras reais + iteraÃ§Ã£o dos prompts.

**P: E se a BNCC mudar?**
R: Seeds de re-importaÃ§Ã£o jÃ¡ contemplam isso. Basta baixar novos TSVs do MEC e executar `npx prisma db seed`.

---

## 15. Checklist de Start RÃ¡pido

### Antes de comeÃ§ar a codificar:

```bash
# 1. Confirmar taxonomia
npx prisma studio
# Verificar: 3 EducationLevels, 12 Grades, 14 Subjects
# EF1 deve ter 8 GradeSubjects, EF2 deve ter 9

# 2. Baixar dados BNCC (se ainda nÃ£o tiver)
# Colocar em:
#   - prisma/seeds/data/bncc_infantil.tsv
#   - prisma/seeds/data/bncc_fundamental.tsv

# 3. Verificar seeds BNCC
ls -la prisma/seeds/
# Deve ter:
#   - seed-bncc-infantil.ts âœ…
#   - seed-bncc-fundamental.ts âœ…
#   - index.ts (com imports) âœ…

# 4. Criar branch de feature
git checkout -b feature/lesson-plan-generator

# 5. Pronto para Fase 0!
```

### Primeira coisa a fazer (Fase 0):

```bash
# 1. Instalar dependÃªncias de IA
npm install ai @ai-sdk/openai

# 2. Configurar OpenAI
echo "OPENAI_API_KEY=sk-proj-..." >> .env

# 3. Garantir que TSVs existem
ls -la prisma/seeds/data/bncc_*.tsv

# 4. Rodar reset completo (faz tudo automaticamente!)
./scripts/reset-db.sh

# 5. Verificar no Prisma Studio
npx prisma studio
# Deve ter: bncc_skill populado com habilidades

# 6. ComeÃ§ar implementaÃ§Ã£o pela Fase 1 (APIs)!
```

**Boa sorte! ğŸš€**
